## Cameron Calv ECE T480
# Project 4 Main File
# Plot operating point of a BJT
from matplotlib import pyplot as plt
if __name__ == '__main__':

    bjt_op_1_v = [-0.003,-0.002,-0.002,0,-0.002,0.003,0.003,0.019,0.039,0.053,0.101,0.122,0.145,0.149,0.153,0.153,0.155,0.306,0.455,0.464,0.611,0.639,0.772,0.778,0.927,0.976,1.183,1.236,1.36,1.391,1.541,1.552,1.7,1.784,1.856,2.008,3.962,5.877,7.734,9.72,11.601,13.598,15.473,17.399,19.349,21.347]
    bjt_op_1_ic = [0.125,0.079,0.166,0.264,0.359,0.456,0.552,0.639,0.736,0.831,0.927,1.024,1.106,1.2,1.286,1.362,1.41,1.419,1.422,1.425,1.427,1.429,1.432,1.433,1.435,1.437,1.439,1.441,1.443,1.444,1.446,1.448,1.449,1.451,1.452,1.454,1.479,1.503,1.526,1.548,1.569,1.589,1.61,1.631,1.652,1.674]
    bjt_op_2_v = [-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,0.002,0.003,0.003,0,0.005,0.005,0.009,0.009,0.022,0.017,0.032,0.039,0.06,0.056,0.073,0.097,0.09,0.113,0.111,0.131,0.139,0.141,0.145,0.144,0.149,0.153,0.153,0.153,0.153,0.153,0.252,0.314,0.463,0.463,0.614,0.747,0.772,0.8,0.927,1.021,1.2,1.236,1.361,1.391,1.538,1.545,1.7,1.726,1.855,2.002,3.868,5.724,7.61,9.505,11.446,13.303,15.308,17.016,19.027,20.883]
    bjt_op_2_ic = [0.457,0.092,0.178,0.278,0.375,0.474,0.571,0.665,0.763,0.863,0.965,1.064,1.156,1.254,1.355,1.454,1.554,1.654,1.748,1.845,1.949,2.047,2.148,2.236,2.337,2.436,2.537,2.637,2.724,2.828,2.928,3.022,3.124,3.213,3.299,3.385,3.46,3.501,3.512,3.518,3.525,3.531,3.537,3.542,3.547,3.552,3.557,3.562,3.566,3.571,3.575,3.58,3.584,3.589,3.593,3.597,3.601,3.669,3.731,3.796,3.859,3.919,3.982,4.045,4.109,4.175,4.243]
    bjt_op_3_v = [-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,0,-0.002,-0.002,-0.002,0.002,0.002,0,0,0.011,0.002,0.002,0.006,0,0.006,0.014,0.006,0.022,0.012,0.031,0.034,0.032,0.036,0.029,0.051,0.057,0.073,0.074,0.094,0.079,0.104,0.119,0.131,0.114,0.131,0.136,0.136,0.144,0.145,0.141,0.15,0.15,0.15,0.152,0.153,0.153,0.153,0.152,0.153,0.152,0.153,0.153,0.155,0.252,0.312,0.459,0.463,0.605,0.637,0.772,0.775,0.927,0.933,1.091,1.236,1.241,1.391,1.397,1.545,1.586,1.702,1.838,1.855,2.008,3.866,5.661,7.43,9.29,11.143,13.006,14.85,16.705,18.506,20.415]
    bjt_op_3_ic = [0.758,0.093,0.181,0.28,0.382,0.483,0.582,0.671,0.773,0.88,0.976,1.079,1.17,1.272,1.369,1.474,1.572,1.676,1.764,1.869,1.971,2.071,2.174,2.265,2.362,2.47,2.563,2.673,2.759,2.864,2.966,3.066,3.173,3.272,3.362,3.465,3.566,3.661,3.771,3.86,3.957,4.063,4.163,4.255,4.356,4.455,4.553,4.654,4.756,4.84,4.945,5.043,5.138,5.241,5.338,5.418,5.517,5.605,5.682,5.734,5.752,5.764,5.776,5.785,5.794,5.803,5.811,5.82,5.829,5.837,5.844,5.852,5.86,5.868,5.875,5.883,5.89,5.897,5.905,5.912,6.029,6.149,6.265,6.387,6.501,6.631,6.752,6.884,7.018,7.153]
    bjt_op_4_v = [-0.002,-0.003,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,-0.002,0,0.002,-0.002,-0.002,-0.002,0.003,-0.002,0,0.002,0.003,0.009,0.005,0.002,0.002,0.003,0.014,0.008,0.011,0.012,0.012,0.015,0.022,0.028,0.019,0.02,0.037,0.037,0.042,0.025,0.042,0.063,0.077,0.063,0.068,0.093,0.093,0.105,0.091,0.108,0.105,0.124,0.127,0.135,0.125,0.133,0.136,0.142,0.144,0.145,0.145,0.15,0.15,0.144,0.149,0.15,0.153,0.152,0.149,0.152,0.153,0.152,0.152,0.153,0.153,0.153,0.153,0.153,0.153,0.153,0.153,0.166,0.303,0.354,0.463,0.469,0.616,0.702,0.772,0.78,0.927,0.93,1.086,1.236,1.239,1.391,1.392,1.544,1.552,1.7,1.734,1.856,1.977,2.011,3.846,5.568,7.348,9.126,10.842,12.669,14.387,16.088,17.797,19.644,21.346]
    bjt_op_4_ic = [2.15,0.085,0.173,0.273,0.368,0.475,0.587,0.673,0.767,0.881,0.981,1.084,1.174,1.276,1.376,1.479,1.581,1.685,1.775,1.877,1.978,2.08,2.182,2.274,2.376,2.478,2.579,2.682,2.773,2.874,2.975,3.082,3.186,3.286,3.379,3.478,3.581,3.685,3.786,3.875,3.977,4.079,4.183,4.286,4.378,4.478,4.58,4.681,4.787,4.876,4.977,5.079,5.184,5.286,5.388,5.477,5.58,5.683,5.776,5.888,5.977,6.076,6.18,6.28,6.381,6.471,6.57,6.673,6.775,6.878,6.964,7.065,7.164,7.267,7.366,7.465,7.543,7.65,7.733,7.835,7.92,7.986,8.031,8.053,8.069,8.085,8.097,8.111,8.125,8.138,8.151,8.162,8.175,8.187,8.199,8.211,8.223,8.234,8.245,8.257,8.269,8.281,8.291,8.302,8.475,8.673,8.851,9.047,9.243,9.443,9.656,9.871,10.093,10.339,10.587]

    load_line_vals = []
    for i in range(41):
        load_line_vals.append(i/2.0)
    vcc_val = 20.0 #Volts
    rc_val = 2.0 #kOhms
    op_point_eq = lambda vce: (vcc_val/rc_val) - (1/rc_val)*vce
    load_line_currents = []
    for val in load_line_vals:
        load_line_currents.append(op_point_eq(val))

    fig = plt.figure(1)
    # Plot curves for operating conditions
    plt.plot(bjt_op_1_v, bjt_op_1_ic, label=r'$I_{b}=10.006 µA$', color='blue')
    plt.plot(bjt_op_2_v, bjt_op_2_ic, label=r'$I_{b}=20.015 µA$', color='blue')
    plt.plot(bjt_op_3_v, bjt_op_3_ic, label=r'$I_{b}=30.02 µA$', color='blue')
    plt.plot(bjt_op_4_v, bjt_op_4_ic, label=r'$I_{b}=40.038 µA$', color='blue')
    # Plot the load line
    plt.plot(load_line_vals, load_line_currents, label='Load Line', color='black')
    # Plot the load line endpoints
    plt.plot(20, op_point_eq(20), 'o', color='blue', marker='o')
    plt.plot(0, op_point_eq(0), 'o', color='blue', marker='o')
    # Plot the operating points (Numbers garnered from graphical observation)
    op_point_1_v = 3.21
    op_point_1_i = op_point_eq(3.21)
    op_point_2_v = 7.47
    op_point_2_i = op_point_eq(7.47)
    op_point_3_v = 12.10
    op_point_3_i = op_point_eq(12.10)
    op_point_4_v = 16.75
    op_point_4_i = op_point_eq(16.75)
    plt.plot(op_point_1_v, op_point_1_i, 'o', color='red', marker='o')
    plt.plot(op_point_2_v, op_point_2_i, 'o', color='red', marker='o')
    plt.plot(op_point_3_v, op_point_3_i, 'o', color='red', marker='o')
    plt.plot(op_point_4_v, op_point_4_i, 'o', color='red', marker='o')
    # PLot the labels
    plt.text(20, 1, r'$I_{b}=10.006 µA$')
    plt.text(20, 3.5, r'$I_{b}=20.015 µA$')
    plt.text(20, 6.5, r'$I_{b}=30.02 µA$')
    plt.text(20, 9.7, r'$I_{b}=40.038 µA$')
    plt.text(op_point_1_v, 9, str(op_point_1_v)+" V, "+str(round(op_point_1_i,3))+" mA\n"+r'$\beta=$'+str(round(op_point_1_i/(40.038/1000), 3)))
    plt.text(op_point_2_v, 7, str(op_point_2_v)+" V, "+str(round(op_point_2_i,3))+" mA\n"+r'$\beta=$'+str(round(op_point_2_i/(30.02/1000), 3)))
    plt.text(op_point_3_v, 4.3, str(op_point_3_v)+" V, "+str(round(op_point_3_i,3))+" mA\n"+r'$\beta=$'+str(round(op_point_3_i/(20.015/1000), 3)))
    plt.text(op_point_4_v, 2.2, str(op_point_4_v)+" V, "+str(round(op_point_4_i,3))+" mA\n"+r'$\beta=$'+str(round(op_point_4_i/(10.006/1000), 3)))
    plt.xlabel(r'$V_{ce} (V)$')
    plt.ylabel(r'$I_{collector} (mA)$')
    plt.axis([0.0, 25, 0, 12])
    plt.grid(True, which="both")
    plt.title("BJT Operating Point Plot Project 3 Calv")
    plt.show();
